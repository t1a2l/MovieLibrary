(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),o=a(13),r=a.n(o),l=(a(89),a(17)),s=a(18),c=a(20),d=a(19),p=a(21),m=a(14),u=a(54),v=a.n(u),h=function(e,t){return function(a){a({type:"MODAL_TOGGLE",display:e,movieId:t})}},f=function(e,t){return function(a){a({type:"INPUT_CHANGE",id:e,value:t})}},g=a(177),E=a(179),b=a(172),y=a(170),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).editMovie=function(){a.props.modalToggle(!0,a.props.movieId)},a.deleteMovie=function(){a.toggleDialog(),a.props.deleteMovie(a.props.modalMovieId)},a.toggleDialog=function(){a.props.toggleDialog(a.props.dialogDisplay,a.props.movieId)},a.imageError=function(){a.props.imageError(a.props.movieId)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.movies.find(function(t){return t.imdbID===e.props.movieId});return n.a.createElement("div",null,n.a.createElement(g.a,{show:this.props.dialogDisplay,onHide:this.toggleDialog.bind(this)},n.a.createElement(g.a.Header,null,n.a.createElement(g.a.Title,null,"Delete Movie")),n.a.createElement(g.a.Body,null,"Are you sure you want to delete this movie"),n.a.createElement(g.a.Footer,null,n.a.createElement(E.a,{onClick:this.toggleDialog.bind(this)},"Cancel"),n.a.createElement(E.a,{bsStyle:"primary",onClick:this.deleteMovie.bind(this)},"OK"))),n.a.createElement("div",{className:"myMovie",style:{width:"300px",borderWidth:"1px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"10px",backgroundColor:"#263c70"}},n.a.createElement("img",{className:"image-root",onError:this.imageError.bind(this),alt:"Movie",src:t.Poster,style:{width:"100%",height:"300px",objectFit:"cover",borderWidth:"1px",borderStyle:"solid"}}),n.a.createElement("div",{className:"movieData"},n.a.createElement(b.a,null,n.a.createElement(y.a,{style:{height:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",backgroundColor:"#F0FFFF"}},t.imdbID),n.a.createElement(y.a,{style:{height:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",backgroundColor:"#F0FFFF"}},t.Title),n.a.createElement(y.a,{style:{height:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",backgroundColor:"#F0FFFF"}},t.Year),n.a.createElement(y.a,{style:{height:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",backgroundColor:"#F0FFFF"}},t.Runtime),n.a.createElement(y.a,{style:{height:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",backgroundColor:"#F0FFFF"}},t.Genre),n.a.createElement(y.a,{style:{height:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",backgroundColor:"#F0FFFF"}},t.Director)),n.a.createElement(E.a,{bsStyle:"info",onClick:this.editMovie.bind(this),style:{color:"#0f1113"}},"Edit"),"\xa0",n.a.createElement(E.a,{bsStyle:"warning",onClick:this.toggleDialog.bind(this),style:{color:"#0f1113"}},"Delete"))))}}]),t}(i.Component),M=Object(m.b)(function(e){return{movies:e.movies,modalDisplay:e.modalDisplay,dialogDisplay:e.dialogDisplay,modalMovieId:e.modalMovieId}},function(e){return{modalToggle:function(t,a){e(h(t,a))},deleteMovie:function(t){var a;e((a=t,function(e){e({type:"DELETE_MOVIE",id:a})}))},toggleDialog:function(t,a){e(function(e,t){return function(a){a({type:"TOGGLE_DIALOG",display:e,movieId:t})}}(t,a))},imageError:function(t){var a;e((a=t,function(e){e({type:"IMAGE_ERROR",id:a})}))}}})(O),D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).pageScrolling=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight-20&&(a.props.changePage(a.props.page),a.props.getMovies(a.props.search,a.props.page))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.getMovies(this.props.search,this.props.page),document.addEventListener("scroll",this.pageScrolling.bind(this))}},{key:"componentDidUpdate",value:function(){var e=this;if(this.props.updateMoviesSearch){this.props.getMovies(this.props.search,1)}else this.props.updateMoviesList&&this.props.movies.forEach(function(t){e.props.getMovieData(t.imdbID)})}},{key:"render",value:function(){return n.a.createElement("div",{className:"movieCatalog",style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",flexWrap:"wrap"}},this.props.movies.map(function(e){return n.a.createElement(M,{key:e.imdbID,movieId:e.imdbID})}))}}]),t}(i.Component),I=Object(m.b)(function(e){return{page:e.page,movies:e.movies,updateMoviesSearch:e.updateMoviesSearch,updateMoviesList:e.updateMoviesList,search:e.search}},function(e){return{getMovies:function(t,a){e(function(e,t){return function(a){return v.a.get("http://www.omdbapi.com/?s=".concat(e,"&page=").concat(t,"&apikey=382c69b0")).then(function(t){var i;i=t.data.Error?[]:t.data.Search,a({type:"FETCH_MOVIES",movies:i,listUpdated:!0,search:e})})}}(t,a))},getMovieData:function(t){e(function(e){return function(t){v.a.get("http://www.omdbapi.com/?i=".concat(e,"&apikey=382c69b0")).then(function(e){return e.data}).then(function(a){var i={Runtime:a.Runtime,Genre:a.Genre,Director:a.Director,Poster:a.Poster};t({type:"FETCH_MOVIE_DATA",movieObj:i,movieId:e})})}}(t))},changePage:function(t){e(function(e){return function(t){t({type:"CHANGE_PAGE",page:e})}}(t))}}})(D),C=a(173),w=a(174),j=a(175),x=a(176),T=a(178),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleChange=function(e){var t=e.target;a.props.inputChange(t.id,t.value)},a.saveChanges=function(){var e=/[!@#$%^&*()_+\-=\]{};':"\\|.<>?]/,t=a.props.modalEditMovie,i=a.props.movies.find(function(e){return e.Title===t.Title&&e.imdbID!==t.imdbID}),n="";i?n="Title already exists":""===t.Title||e.test(t.Title)||i?n="Title could not be empty and should include alpha numeric charecters":""===t.Year||isNaN(Date.parse(t.Year))?n="Please enter a valid year e.g 2014":""===t.Runtime||isNaN(t.Runtime)?n="Runtime should contain only numbers":""===t.Genre||e.test(t.Genre)?n="Genre should be a list of words seperated by comma":(""===t.Director||e.test(t.Director))&&(n="Director could not be empty and should include director name"),a.props.saveChanges(n)},a.modalClose=function(){a.props.modalToggle(!1,null)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"myModal"},n.a.createElement(g.a,{show:this.props.modalDisplay,onHide:this.modalClose.bind(this)},n.a.createElement(g.a.Header,null,n.a.createElement(g.a.Title,null,"Movie details - ",this.props.modalEditMovie.imdbID)),n.a.createElement(g.a.Body,null,n.a.createElement(C.a,{bsStyle:"warning",className:this.props.modalError?"":"hidden"},n.a.createElement("h4",null,"Error!"),n.a.createElement("p",null,this.props.modalError)),n.a.createElement(w.a,null,n.a.createElement(j.a,null,n.a.createElement(x.a,null,"Title"),n.a.createElement(T.a,{id:"Title",type:"text",value:this.props.modalEditMovie.Title,onChange:this.handleChange.bind(this)})),n.a.createElement(j.a,null,n.a.createElement(x.a,null,"Year"),n.a.createElement(T.a,{id:"Year",type:"text",value:this.props.modalEditMovie.Year,onChange:this.handleChange.bind(this)})),n.a.createElement(j.a,null,n.a.createElement(x.a,null,"Runtime"),n.a.createElement(T.a,{id:"Runtime",type:"text",value:this.props.modalEditMovie.Runtime,onChange:this.handleChange.bind(this)})),n.a.createElement(j.a,null,n.a.createElement(x.a,null,"Genre"),n.a.createElement(T.a,{id:"Genre",type:"text",value:this.props.modalEditMovie.Genre,onChange:this.handleChange.bind(this)})),n.a.createElement(j.a,null,n.a.createElement(x.a,null,"Director"),n.a.createElement(T.a,{id:"Director",type:"text",value:this.props.modalEditMovie.Director,onChange:this.handleChange.bind(this)})))),n.a.createElement(g.a.Footer,null,n.a.createElement(E.a,{onClick:this.saveChanges.bind(this),bsStyle:"primary"},"Save"),n.a.createElement(E.a,{onClick:this.modalClose.bind(this)},"Cancel"))))}}]),t}(i.Component),S=Object(m.b)(function(e){return{movies:e.movies,modalDisplay:e.modalDisplay,modalMovieId:e.modalMovieId,modalEditMovie:e.modalEditMovie,modalError:e.modalError}},function(e){return{modalToggle:function(t,a){e(h(t,a))},inputChange:function(t,a){e(f(t,a))},saveChanges:function(t){e(function(e){return function(t){t({type:"SAVE_CHANGES",error:e})}}(t))}}})(F),G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleChange=function(e){var t=e.target;a.props.inputChange(t.id,t.value)},a.searchMovie=function(){""!==a.props.search&&a.props.searchMovie(a.props.search)},a.editMovie=function(){a.props.modalToggle(!0,"")},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App container-fluid",style:{display:"flex",flexDirection:"column",backgroundColor:"#171717"}},n.a.createElement("div",{className:"app-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"6px solid #7FFFD4",flexWrap:"wrap"}},n.a.createElement("h2",{style:{color:"#FFF",marginTop:"10px"}},"Movie Library"),n.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"}},n.a.createElement(T.a,{className:"searchMovieStyle",onChange:this.handleChange.bind(this),value:this.props.search,style:{marginTop:"8px",fontSize:"18px"}}),n.a.createElement(E.a,{bsStyle:"primary",onClick:this.searchMovie.bind(this),style:{marginTop:"8px",marginLeft:"20px",fontSize:"18px"}},"Search")),n.a.createElement(E.a,{bsStyle:"primary",onClick:this.editMovie.bind(this),style:{marginTop:"8px",fontSize:"18px"}},"Add new movie")),n.a.createElement(I,null),n.a.createElement(S,null))}}]),t}(i.Component),A=Object(m.b)(function(e){return{search:e.search}},function(e){return{searchMovie:function(t){var a;e((a=t,function(e){e({type:"SEARCH_MOVIE",value:a})}))},modalToggle:function(t,a){e(h(t,a))},inputChange:function(t,a){e(f(t,a))}}})(G),_=a(25),k=a(39),R=a(10),N=a(28),L={page:1,movies:[],updateMoviesSearch:!0,updateMoviesList:!1,modalDisplay:!1,dialogDisplay:!1,modalMovieId:null,modalEditMovie:{imdbID:"",Title:"",Year:"",Runtime:"",Genre:"",Director:"",Poster:""},modalError:"",search:"new-york",searchTimeout:"",newMovieIndex:0},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;if("FETCH_MOVIES"===t.type){var a=Object(N.a)(e.movies);return t.movies.forEach(function(e){var t;e.Title=((t=(t=e.Title).replace(/[^a-zA-Z0-9 ]/g,"")).toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" "),t);var i=a.findIndex(function(t){return e.imdbID===t.imdbID});-1!==i?a[i]=e:a.push(e)}),Object(R.a)({},e,{movies:a,updateMoviesSearch:!1,updateMoviesList:t.listUpdated,search:t.search})}if("FETCH_MOVIE_DATA"===t.type){var i=e.movies.findIndex(function(e){return e.imdbID===t.movieId}),n=Object.assign({},e.movies[i],t.movieObj),o=Object(N.a)(e.movies);return o.splice(i,1,n),Object(R.a)({},e,{movies:o,updateMoviesList:!1})}if("CHANGE_PAGE"===t.type){var r=t.page+1;return Object(R.a)({},e,{page:r})}if("MODAL_TOGGLE"===t.type){var l=e.movies.findIndex(function(e){return e.imdbID===t.movieId}),s=e.movies[l],c=Object(R.a)({},e.modalEditMovie),d=e.modalError;return t.movieId&&""!==t.movieId?c={imdbID:s.imdbID,Title:s.Title,Year:s.Year,Runtime:s.Runtime.match(/\d+/g).map(Number)[0],Genre:s.Genre,Director:s.Director,Poster:s.Poster}:""===t.movieId?c={imdbID:"new-movie-"+e.newMovieIndex,Title:"",Year:"",Runtime:"",Genre:"",Director:"",Poster:""}:(d="",c={imdbID:"",Title:"",Year:"",Runtime:"",Genre:"",Director:"",Poster:""}),Object(R.a)({},e,{modalError:d,modalDisplay:t.display,modalMovieId:t.movieId,modalEditMovie:c})}if("INPUT_CHANGE"===t.type){if(""!==t.id){var p=Object(R.a)({},e.modalEditMovie,Object(k.a)({},t.id,t.value));return Object(R.a)({},e,{modalEditMovie:p})}return Object(R.a)({},e,{search:t.value})}if("SAVE_CHANGES"===t.type){if(""===t.error){var m=Object(R.a)({},e.modalEditMovie),u=e.newMovieIndex;m.Runtime=m.Runtime+" min";var v=e.movies.findIndex(function(e){return e.imdbID===m.imdbID}),h=Object(N.a)(e.movies);return-1!==v?h.splice(v,1,m):(h.splice(0,0,m),u++),Object(R.a)({},e,{movies:h,modalError:t.error,modalDisplay:!1,newMovieIndex:u})}return Object(R.a)({},e,{modalError:t.error})}if("DELETE_MOVIE"===t.type){var f=Object(N.a)(e.movies),g=e.movies.findIndex(function(e){return e.imdbID===t.id});return f.splice(g,1),Object(R.a)({},e,{movies:f})}if("TOGGLE_DIALOG"===t.type)return t.display?t.display=!1:t.display=!0,Object(R.a)({},e,{dialogDisplay:t.display,modalMovieId:t.movieId});if("SEARCH_MOVIE"===t.type)return Object(R.a)({},e,{movies:[],updateMoviesSearch:!0,search:t.value});if("IMAGE_ERROR"===t.type){var E=Object(N.a)(e.movies),b=E.findIndex(function(e){return e.imdbID===t.id});return E[b].Poster="/noImg.png",Object(R.a)({},e,{movies:E,dialogDisplay:t.display,modalMovieId:t.movieId})}return e},P=a(83),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.c,V=Object(_.d)(H,Y(Object(_.a)(P.a)));r.a.render(n.a.createElement(m.a,{store:V},n.a.createElement(A,null)),document.getElementById("root"))},84:function(e,t,a){e.exports=a(171)},89:function(e,t,a){}},[[84,2,1]]]);
//# sourceMappingURL=main.a7b533a2.chunk.js.map